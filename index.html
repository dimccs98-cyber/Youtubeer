<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Video Player</title>
    <style>
        /* å…¨å±€é‡ç½® */
        * { box-sizing: border-box; }
        body { margin: 0; padding: 0; background-color: #121212; color: #e0e0e0; font-family: sans-serif; }
        
        /* --- 1. è§†é¢‘åŒºåŸŸ (å›ºå®šå¤´éƒ¨) --- */
        /* ä½¿ç”¨ fixed å®šä½ï¼Œå½»åº•è§£å†³è¢«é®æŒ¡é—®é¢˜ */
        .video-container { 
            position: fixed; 
            top: 0; 
            left: 0;
            width: 100%; 
            /* ä½¿ç”¨ vw å•ä½ç²¾ç¡®è®¡ç®— 16:9 é«˜åº¦ (100vw * 9 / 16 = 56.25vw) */
            height: 56.25vw; 
            background: #000; 
            z-index: 1000; /* å±‚çº§æé«˜ï¼Œç¡®ä¿æµ®åœ¨æ–‡å­—ä¹‹ä¸Š */
            box-shadow: 0 4px 12px rgba(0,0,0,0.8); 
        }
        
        .video-container iframe { 
            width: 100%; height: 100%; border: none; display: block;
        }

        /* --- 2. åŠŸèƒ½æŒ‰é’®åŒº (ç™»å½•/æ•‘åœº) --- */
        .action-bar {
            /* åŒæ ·å›ºå®šåœ¨è§†é¢‘ä¸‹æ–¹ */
            position: fixed;
            top: 56.25vw;
            left: 0;
            width: 100%;
            background: #1e1e1e;
            padding: 8px;
            text-align: center;
            border-bottom: 1px solid #333;
            z-index: 999;
            display: flex;
            justify-content: space-around;
            align-items: center;
        }

        .action-btn {
            color: #3ea6ff; 
            font-size: 13px; 
            text-decoration: none;
            padding: 5px 10px;
            border: 1px solid #333;
            border-radius: 15px;
            background: #2a2a2a;
        }

        /* --- 3. å†…å®¹åŒºåŸŸ --- */
        .content { 
            /* ç»™é¡¶éƒ¨ç•™å‡ºç©ºé—´ = è§†é¢‘é«˜åº¦ + æŒ‰é’®æ é«˜åº¦ */
            margin-top: calc(56.25vw + 45px); 
            padding: 20px 16px; 
            min-height: 100vh; 
            position: relative;
            z-index: 1; 
        }

        .title { 
            font-size: 18px; font-weight: bold; margin-bottom: 12px; 
            color: #ffffff; border-left: 4px solid #FFD700; padding-left: 10px; 
            line-height: 1.4;
        }
        .text { 
            font-size: 16px; line-height: 1.6; color: #cccccc; 
            word-wrap: break-word; white-space: pre-wrap; 
        }
        
        .loader {
            display: flex; justify-content: center; align-items: center;
            height: 100%; width: 100%; position: absolute; color: #666; font-size: 14px;
            z-index: -1;
        }
    </style>
</head>
<body>

    <!-- 1. è§†é¢‘å®¹å™¨ -->
    <div class="video-container" id="video-wrapper">
        <div class="loader" id="loader">åŠ è½½ä¸­...</div>
        <!-- iframe å°†è¢«ç›´æ¥æ’å…¥è¿™é‡Œ -->
    </div>

    <!-- 2. æ“ä½œæ  (å›ºå®šåœ¨è§†é¢‘ä¸‹æ–¹) -->
    <div class="action-bar">
        <a id="login-btn" class="action-btn" href="#" target="_self">ğŸ”‘ ç™»å½• YouTube</a>
        <a id="jump-btn" class="action-btn" href="#" target="_blank">ğŸš€ è·³è½¬ App è§‚çœ‹</a>
    </div>

    <!-- 3. æ–‡å­—å†…å®¹ -->
    <div class="content">
        <div class="title">è§†é¢‘æ‘˜è¦</div>
        <div class="text" id="quote-text">æ­£åœ¨è·å–æ•°æ®...</div>
    </div>

    <script>
        try {
            const urlParams = new URLSearchParams(window.location.search);
            const videoId = urlParams.get('v') || urlParams.get('videoId');
            const quoteTextRaw = urlParams.get('text');

            // 1. æ˜¾ç¤ºæ–‡å­—
            const quoteDiv = document.getElementById('quote-text');
            if (quoteTextRaw && quoteTextRaw !== "null") {
                try {
                    quoteDiv.innerText = decodeURIComponent(quoteTextRaw);
                } catch (e) {
                    quoteDiv.innerText = quoteTextRaw;
                }
            } else {
                quoteDiv.innerText = "æš‚æ— æ‘˜è¦å†…å®¹";
            }

            // 2. æ„é€ ç™»å½•é“¾æ¥
            // ç‚¹å‡»ç™»å½•åï¼Œè·³è½¬ Google ç™»å½•é¡µï¼ŒæˆåŠŸåè‡ªåŠ¨è·³å›å½“å‰é¡µ
            const currentUrl = window.location.href;
            const loginUrl = "https://accounts.google.com/ServiceLogin?service=youtube&passive=true&continue=" + encodeURIComponent(currentUrl);
            document.getElementById('login-btn').href = loginUrl;

            // 3. æ„é€ è·³è½¬é“¾æ¥
            if (videoId) {
                document.getElementById('jump-btn').href = "https://m.youtube.com/watch?v=" + videoId;

                // 4. æš´åŠ›æ’å…¥ IFrame (è§£å†³é»‘å±é—®é¢˜)
                // controls=1: å¼ºåˆ¶æ˜¾ç¤ºè¿›åº¦æ¡
                // fs=1: æ˜¾ç¤ºå…¨å±æŒ‰é’®
                // playsinline=1: å†…åµŒæ’­æ”¾
                const iframeHtml = `
                    <iframe 
                        src="https://www.youtube-nocookie.com/embed/${videoId}?autoplay=1&mute=1&controls=1&playsinline=1&fs=1&rel=0&modestbranding=1" 
                        title="YouTube video player" 
                        frameborder="0" 
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                        referrerpolicy="strict-origin-when-cross-origin" 
                        allowfullscreen>
                    </iframe>
                `;
                
                const wrapper = document.getElementById('video-wrapper');
                // ç§»é™¤ loader
                const loader = document.getElementById('loader');
                if(loader) loader.style.display = 'none';

                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = iframeHtml.trim();
                wrapper.appendChild(tempDiv.firstChild);

            } else {
                document.getElementById('loader').style.display = 'none';
                document.getElementById('video-wrapper').innerHTML = '<div style="display:flex;justify-content:center;align-items:center;height:100%;color:white;">æ— æ•ˆçš„è§†é¢‘ ID</div>';
            }

        } catch (e) {
            document.getElementById('loader').style.display = 'none';
            document.getElementById('quote-text').innerText = "é¡µé¢é”™è¯¯ï¼š" + e.message;
        }
    </script>
</body>
</html>
